extends layout

block content

	if(preview)
		.text-right
			a.btn.btn-light(href='/blog') Exit preview
		br
	for val in blogs
		.card
			.card-body
				h4.card-title #{val.title}
				small.blockquote-footer #{val.created}
				p.card-text #{val.desc }
				
			.card-footer.text-right
				if val.liked
					span you liked this.
				else 
					button.card-link(onclick='bloglike("'+ val._id +'")') like
				|  (
				strong  #{val.numOfLikes}
				|  people like this)
				
		hr

	block scripts
		script.
			function bloglike(id){
				var span = event.target.nextElementSibling;
			
				$.ajax({
						type: "POST",
						url: '/api/blog/like/' + id,
						contentType: 'application/json',
						dataType: 'json',
						success: function (res) {			
							span.innerText = res.likes.length;
						},
						error: function(res){
							console.log(res);
						}
					});
			}